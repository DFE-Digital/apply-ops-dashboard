<% if environment == 'qa' %>
  <div class='govuk-body'>
    <a href='<%= latest_build.diff_against_master_url %>' class='govuk-body govuk-!-font-size-19'>diff QA against master</a>
  </div>
<% elsif environment == 'staging' %>
  <div class='govuk-body'>
    The following PRs haven't been deployed to staging yet (<a href='<%= latest_build.diff_against_url(state.latest_successfull_build_to('qa').commit_sha) %>' class='govuk-!-font-size-19'>see the full diff of Staging against QA</a>):
  </div>

  <ol class='govuk-list govuk-list--number govuk-body-s'>
    <% Diff.pull_requests_between(state.latest_successfull_build_to('qa').commit_sha, state.latest_successfull_build_to('staging').commit_sha).each do |author, title| %>
      <li><%= title %> (<%= author %>)</li>
    <% end %>
  </ol>


  <label class="govuk-label" style='font-color: #fff;'>Commit to use for deploy:</label>
  <input value='<%= state.latest_successfull_build_to('qa').commit_sha %>' class='govuk-input' %>

<% elsif environment == 'production' %>
  <% if state.staging_and_production_not_in_sync? %>
    <div class='govuk-body'>
      Deploy Staging to Production/Sandbox:
    </div>

    <input value='<%= state.latest_successfull_build_to('staging').commit_sha %>' class='govuk-input' %>

    <% Diff.pull_requests_between(state.latest_successfull_build_to('staging').commit_sha, state.latest_successfull_build_to('production').commit_sha).each do |author, title| %>
      <li><%= title %> (<%= author %>)</li>
    <% end %>
  <% else %>
    <div class='govuk-body'>
      Deploy changes to staging before deploying to production
    </div>
  <% end %>
<% end %>
